hi everyone welcome back to another
video in the web security academy series
in today's video we'll be covering lab
number 16
titled blind sequel injection without a
band data exfiltration
if you do not have an account on the web
security academy you can get one by
visiting the url portsweger.net slash
web security
and clicking on the sign up button i
already have an account and i am logged
in so to access the academy i'm going to
click on academy
go down select the learning path
select sql injection
go down select blind sql injection
and then go down to the last exercise in
this section which is
lab number 16 titled blind sql injection
without a band data exfiltration
all right let's get started this lab
contains a blind sql injection
vulnerability
the application uses a tracking cookie
for analytics
and performs a sql query containing the
value of the submitted cookie
so our vulnerable parameter
is the tracking cookie
the sql query is executed asynchronously
and has no effect on the application's
response
however you can trigger an out-of-band
interaction with an external domain so
similar to the previous exercise
the database contains a different table
called users with columns called
username and password
you need to exploit the blind sql
injection vulnerability to find out the
password of the administrator
user to solve the lab login as the
administrator user
so we've got two end goals over here
one is exploit
sqli to output
the password of the
administrator user
and in this case we're given the column
names which is username and password and
the table name which is users
and the second thing is to log in
as the administrator user
now something useful to make note of is
this over here to prevent the academy
platform
from being used to attack third parties
our firewall blocks interaction between
the labs and arbitrary external systems
to solve the lab you must use burp
collaborators default public
servercollaborator.net
okay so that means that you can't use
your own external system
in order to complete this exercise you
do have to use burp collaborator which
is only available in the professional
version
of burp so let's open that up
and while that opens up let's access the
lab
hit okay
hit next let's close that
and start burp
let's move that over here go to our
exercise
configure firefox to send requests to
burp which we'll do using foxy proxy now
when i click home it should send it to
burp over here so you could see that in
the proxy let's send that to repeater
because we might be doing multiple
requests
and turn the intercept to be off and
we're back in repeater
and hit send and this should give you
the
home page the source code of the home
page all right let's create our analysis
section
now in the previous exercise we figured
out that this is an
oracle database and we were able to do a
dns lookup
and to do that we had to click on burp
select
the collaborator which i'm noticing
right now i've opened up the community
edition so we're going to have to close
that
because the community edition does not
have collaborator installed on it
so let's open up a professional
again hit next start burp
and load the home request
we see that again in proxy send it to
repeater
go back to proxy turn intercept off and
then in repeater hit send to confirm
that everything is working correctly
and it is all right since we're using
the professional edition we should see
burp collaborator client let's click on
that
and what we're going to do is instead of
doing a dns lookup which we did
in the previous exercise we're going to
exfiltrate data by
outputting the administrator's password
and
getting it to output on verb
collaborator over here
so i'm going to minimize that for now
and go back to the exercise and look at
the hints section
click on the sql injection cheat sheet
go down to dns lookups
so this is what we did in the previous
exercise which only performed the dns
lookup which confirmed that we have an
out-of-band sql injection
now we want to take it a step further
and output data from the database and we
do that using this query over here
and again we know it's oracle based on
the previous exercise
so let's copy that over here
and change up the payload so that it
fits
the sql query in the backend put that
in brackets and comment out the rest of
the query
now we need a burp collaborator client
domain over here
so we'll do that by clicking on copy to
clipboard
and let's put that over here and then
add that in our payload next we need to
enter our query over here
so since we're trying to output the
administrator's password
we're going to say select the password
from the users table
where the username is equal to
administrator and that should be in
quotes
let's copy that put collaborator right
over here and make it small
and go back to repeater our vulnerable
parameter is the tracking id so let's
paste it over here
do control u to url encoded
hit send and check
if a dns lookup was performed by
clicking on pull now
and here we go we see that a dns lookup
was performed and it was from this
ip address over here which should be the
ip address of the application
and you'll notice over here it added the
password
of the administrator to the lookup and
that was done because we put over here
the you know select the password from
the users table where username is equal
to administrator
and so it added it over here so let's
copy that that should be the password of
the administrator
and put it in our notes and let's see
if we could log in using that password
so click on my account
for username use administrator
and then the password is the password
that we found
and hit login
and here we go it says congratulations
you solved the
lab all right so to recap we exploited
an
out-of-band sql injection in order to
exfiltrate the administrator's password
from the database
we usually script our exploits using
python however
since you're not allowed to use an
external system for this application we
won't have a scripting portion for this
video
and this concludes the last exercise in
the sql injection module
if you liked the video hit the subscribe
and share button so that it reaches a
wider audience
also comment below what you learned and
what you would like to see more of
in the future thank you and see you in
the next video